function uploadAndSubmit(){var b=document.forms.demoForm;if(b.file.files.length>0){var c=Date.parse(new Date());files=b.file.files;for(var a=0;a<files.length;a++){(function(f){var e=f.name;var d=new FileReader();d.onloadstart=function(){document.getElementById("bytesTotal").textContent=f.size};d.onprogress=function(g){document.getElementById("bytesRead").textContent=g.loaded};d.onloadend=function(){if(d.error){console.log(d.error)}else{document.getElementById("bytesRead").textContent=f.size;var g=new XMLHttpRequest();console.log(c);g.open("POST","/upload-files?timestamp="+c+";file-name="+f.name);g.overrideMimeType("application/octet-stream");g.send(d.result);g.onreadystatechange=function(){if(g.readyState==4){if(g.status==200){console.log("response: "+g.responseText)}}}}};d.onload=function(i){var j=i.target.result;var h=document.createElement("ul");var g=document.createElement("li");g.innerHTML=e+"____"+j;h.appendChild(g)};d.readAsBinaryString(f)})(files[a])}$.getJSON("/get-ip",function(d){ID=d.ip_address+c;embed_code="<iframe src='/vis-repo/"+ID+"' width='100%' height='650' frameboader='0'> </iframe>";link="/vis-repo/"+ID;download="/download-repo/"+ID;$("#preview-embed-link").attr("href",link);$("#download-embed-link").attr("href",download+".zip").attr("download","topic_vis.zip");$("#embed_code").text(embed_code);$(".embed-iframe").show()})}else{alert("Please choose a file.")}};